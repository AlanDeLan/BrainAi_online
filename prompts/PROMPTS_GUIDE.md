# Керівництво по роботі з промптами архетипів

## Огляд

Тепер промпти архетипів можна:
1. ✅ Виносити в окремі файли для зручного редагування
2. ✅ Створювати багатоступінчасті промпти (основний + додаткові)
3. ✅ Комбінувати файли та текст

## Структура `archetypes.yaml`

### Варіант 1: Використання файлів (рекомендовано)

```yaml
sofiya:
  name: "Софія"
  model_name: "gemini-2.5-flash"
  prompt_file: "prompts/sofiya_base.txt"  # Основний промпт з файлу
  additional_prompts:                      # Додаткові кроки
    - "prompts/sofiya_context_instructions.txt"
    - "prompts/sofiya_response_style.txt"
```

### Варіант 2: Прямий текст (як раніше)

```yaml
sofiya:
  name: "Софія"
  model_name: "gemini-2.5-flash"
  prompt: |
    Ти — Софія, цифрова Особистість...
```

### Варіант 3: Комбінація файлів та тексту

```yaml
lyra:
  name: "Ліра"
  model_name: "gemini-2.5-flash"
  prompt_file: "prompts/lyra_base.txt"
  additional_prompts:
    - "prompts/lyra_criticism.txt"
    - "Додаткова коротка інструкція прямо тут"
```

## Приклади структури файлів промптів

### `prompts/sofiya_base.txt`
Основний промпт з описом особистості, принципів тощо.

### `prompts/sofiya_context_instructions.txt`
Інструкції по роботі з контекстом минулих розмов.

### `prompts/sofiya_response_style.txt`
Вимоги до стилю відповідей.

## Як працює збирання промпту

1. Завантажується основний промпт (з `prompt_file` або `prompt`)
2. Додаються додаткові промпти з `additional_prompts`:
   - Якщо це файл (закінчується на `.txt` або `.md`) - завантажується з файлу
   - Якщо це текст - додається напряму
3. Всі частини з'єднуються подвійними новими рядками (`\n\n`)

## Переваги нової структури

✅ **Модульність** - можна розділяти довгі промпти на частини  
✅ **Зручність редагування** - файли легше редагувати, ніж YAML  
✅ **Повторне використання** - однакові частини можна використовувати для різних архетипів  
✅ **Організація** - легше знаходити та керувати промптами  
✅ **Версійність** - файли легше відстежувати в Git

## Міграція зі старої структури

Якщо у вас є старий `archetypes.yaml` з `prompt:` - він продовжить працювати!
Просто додайте нові поля (`prompt_file`, `additional_prompts`) для покращення організації.

