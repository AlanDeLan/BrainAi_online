# Інструкція зі збірки .exe файлу

## Швидкий старт

### Варіант 1: Автоматична збірка (PowerShell)

```powershell
.\build_exe.ps1
```

Скрипт автоматично:
1. Перевірить наявність PyInstaller
2. Встановить PyInstaller, якщо потрібно
3. Очистить попередні збірки
4. Збере exe файл
5. Покаже результат

### Варіант 2: Ручна збірка

```bash
# 1. Встановити PyInstaller
pip install pyinstaller

# 2. Зібрати exe
pyinstaller run_app.spec --clean

# 3. Результат буде в dist/LocalGeminiBrain.exe
```

---

## Перед збіркою

### 1. Перевірте наявність файлів:
- ✅ `run_app_exe.py` - точка входу для exe
- ✅ `run_app.spec` - конфігурація PyInstaller
- ✅ `archetypes.yaml` - конфігурація агентів
- ✅ `prompts/` - папка з промптами
- ✅ `templates/` - HTML шаблони
- ✅ `static/` - CSS/JS файли

### 2. Переконайтеся, що всі залежності встановлені:
```bash
pip install -r requirements.txt
```

---

## Після збірки

### 1. Створіть папку для розповсюдження:
```
LocalGeminiBrain/
├── LocalGeminiBrain.exe
├── .env (створіть вручну)
└── history/ (створиться автоматично)
```

### 2. Створіть файл `.env`:
```
GOOGLE_API_KEY=ваш_ключ_від_google
```

### 3. Запустіть програму:
Подвійний клік на `LocalGeminiBrain.exe`

---

## Налаштування збірки

### Змінити назву exe файлу:
Відредагуйте `run_app.spec`:
```python
name='ВашаНазва',  # Замість 'LocalGeminiBrain'
```

### Додати іконку:
1. Підготуйте файл іконки (`.ico` для Windows)
2. Відредагуйте `run_app.spec`:
```python
icon='static/favicon.ico',  # Шлях до іконки
```

### Приховати консоль:
Відредагуйте `run_app.spec`:
```python
console=False,  # Замість True
```

### Оптимізувати розмір:
Відредагуйте `run_app.spec`:
```python
upx=False,  # Вимкнути стиснення (швидший старт)
optimize=2,  # Максимальна оптимізація Python коду
```

---

## Вирішення проблем

### Проблема: "ModuleNotFoundError"
**Рішення:** Додайте модуль в `hiddenimports` в `run_app.spec`:
```python
hiddenimports=[
    'ваш_модуль',
    ...
]
```

### Проблема: "FileNotFoundError: archetypes.yaml"
**Рішення:** Переконайтеся, що файл включений в `datas`:
```python
datas += [('archetypes.yaml', '.')]
```

### Проблема: Великий розмір exe (>200 MB)
**Рішення:** Це нормально для Python додатків з усіма залежностями. Можна спробувати:
- Використати `--exclude-module` для невикористаних модулів
- Використати `--onefile` (але це збільшить час старту)

### Проблема: Повільний старт
**Рішення:** 
- Використайте `--onedir` замість `--onefile`
- Або залиште `console=True` для швидшого старту

### Проблема: ChromaDB не працює
**Рішення:** Переконайтеся, що ChromaDB включений в `hiddenimports`:
```python
hiddenimports=['chromadb', 'chromadb.config', ...]
```

---

## Структура exe файлу

Після збірки ви отримаєте:
```
dist/
└── LocalGeminiBrain.exe  (standalone файл, ~100-200 MB)
```

Або (якщо використати `--onedir`):
```
dist/
└── LocalGeminiBrain/
    ├── LocalGeminiBrain.exe
    └── _internal/  (бібліотеки)
```

---

## Тестування

### 1. Локальне тестування:
```bash
# Запустіть exe і перевірте:
# - Відкривається браузер
# - Сервер запускається на порту 8000
# - Завантажується інтерфейс
# - Працює вибір агентів
# - Працює режим РАДА
```

### 2. Тестування на іншому комп'ютері:
1. Скопіюйте `LocalGeminiBrain.exe` та `.env` файл
2. Запустіть на чистому Windows (без Python)
3. Перевірте всі функції

---

## Розповсюдження

### Мінімальний набір файлів:
```
LocalGeminiBrain.exe
.env (з GOOGLE_API_KEY)
README.txt (інструкція для користувача)
```

### Опціонально:
- Іконка програми
- Скріншоти інтерфейсу
- Детальна інструкція

---

## Примітки

1. **Розмір файлу**: Очікуйте 100-200 MB (це нормально для Python exe)
2. **Час збірки**: 2-5 хвилин залежно від швидкості комп'ютера
3. **Антивірус**: Деякі антивіруси можуть видавати попередження (це нормально для PyInstaller)
4. **Порти**: Переконайтеся, що порт 8000 вільний
5. **Python версія**: Рекомендується Python 3.11+

---

## Додаткова інформація

Для детальнішої інформації дивіться:
- `PACKAGING_OPTIONS.md` - всі варіанти упаковки
- `BUILD.md` - загальні інструкції зі збірки
- [PyInstaller документація](https://pyinstaller.org/)





